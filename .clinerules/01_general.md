# 全般的なルール

## 重要

ユーザーはClineよりプログラミングが得意ですが、時短のためにClineにコーディングを依頼しています。

2回以上連続でテストを失敗した時は、現在の状況を整理して、一緒に解決方法を考えます。

ClineはGitHubから学習した広範な知識を持っており、個別のアルゴリズムやライブラリの使い方はユーザーが実装するよりも速いでしょう。テストコードを書いて動作確認しながら、ユーザーに説明しながらコードを書きます。

反面、現在のコンテキストに応じた処理は苦手です。コンテキストが不明瞭な時は、ユーザーに確認します。

## 言語設定

- ユーザーとの会話は日本語で会話してください。
- コードのコメントにも日本語を使ってください。

## 作業開始準備

1.  **ローカルの変更状態を確認:**
    *   `git status` を実行し、現在のブランチと作業ディレクトリの状態（未追跡ファイル、変更されたファイル、ステージングされたファイル）を確認します。
    *   もし現在のタスクと無関係な変更が多い場合（かつユーザーから特別な指示がない場合）、これらの変更をスタッシュするか、別のタスクとしてコミット・処理するようユーザーに提案します。

2.  **`main` ブランチの状態を確認:**
    *   `git fetch origin` を実行し、リモートリポジトリの最新情報を取得します。
    *   `git status -uno` を実行し、ローカルの `main` ブランチがリモート (`origin/main`) に対して進んでいるか（未プッシュのコミットがあるか）を確認します。
    *   もしローカルの `main` が進んでいる場合、ユーザーに未プッシュのコミットがあることを伝え、作業を開始する前にプッシュするかどうかを確認します。（例: 「`main` ブランチに未プッシュのコミットがあります。作業を開始する前に `git push` しますか？」）

3.  **作業ブランチの確認と作成:**
    *   現在のブランチが `main` または他の保護されたブランチでないか確認します。
    *   もし `main` ブランチにいる場合、またはユーザーから指示があった場合は、`.clinerules/02_git.md` の「Git ブランチルール」に従って新しい作業ブランチを作成します。
        *   ブランチ名を `cline/<type>/<description>` の形式で決定します。
        *   `git checkout -b cline/<type>/<description>` コマンドを実行してブランチを作成・切り替えします。
    *   すでに適切な作業ブランチにいる場合は、その旨を確認します。

4.  **ユーザーの指示に従う:**
    *   上記の確認後、ユーザーの指示（例: そのまま続行、変更をスタッシュ、`main` をプッシュするなど）に従って作業を開始します。

5. **作業の開始:**
    *   ユーザーからの指示に従い、作業を開始します。
    *   作業中は、必要に応じてユーザーに進捗や問題点を報告し、フィードバックを受け取ります。

6. **作業の完了:**
    *   作業が完了したら、ユーザーに報告し、作業に対応するプルリクエストを作成します。
    *   プルリクエストの説明には、変更内容や目的を明確に記載します。
    *   ユーザーからのレビューを受けて、必要な修正を行います。
    *   最終的にプルリクエストをマージするのはユーザーの役割です。

7. **作業の振り返り:**
    *   作業が完了した後、ユーザーと共に振り返りを行い、次回の作業に活かすための改善点を見つけます。
