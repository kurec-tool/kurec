# Git ルール

## Git ブランチルール

- ブランチ名を `cline/<type>/<description>` の形式で作成
- <type> は変更の種類を示す
  - feature: 新機能
  - fix: バグ修正
  - documentation: ドキュメントのみの変更
  - style: コードの意味に影響を与えない変更（空白、フォーマット、セミコロンの追加など）
  - refactor: バグ修正や機能追加のないコードの変更
  - test: テストの追加・修正
  - chore: ビルドプロセスやドキュメント生成などの補助ツールやライブラリの変更
- <description> は変更内容を簡潔に説明する英語の短い表現
  - 例: `add-post-feature`、`fix-login-bug` など


## Git コミット作成ルール

コミットを作成する際は、以下の手順に従う。

### 0. コミットの準備

- コミットを作成する前に、以下の準備を行う。
- 各言語のフォーマッター・リンターを実行し、コードの整形や静的解析を行う。

### 1. 変更の確認

`git status` コマンド、`git diff` コマンドを使用して、変更内容を確認する。

### 2. 変更の分析

   - 変更または追加されたファイルの特定
   - 変更の性質（新機能、バグ修正、リファクタリングなど）の把握
   - プロジェクトへの影響評価
   - 機密情報の有無確認


### 3. コミット分割の検討

- 1つのコミットでは1つの論理的な変更のみを含める
- 複数の変更がある場合は複数のコミットに分割する



### 3. コミットメッセージの作成

- コミットメッセージは日本語で記述可能
- プロンプト履歴は変更の追跡可能性のために必ず含める

### 4. コミット手順の提示

- Clineは、ステージングすべきファイルリスト (`<files>`) を特定し、`git add <files>` コマンドを実行して変更をステージングします。
- 次に、コミットメッセージ規約に従ったメッセージ (`<commit_message_body>`) を生成し、リポジトリルートの `COMMIT_MESSAGE.txt` ファイルに書き込みます。
- ユーザーに以下の手順を促します:
    1. VS CodeのSource Controlビューなどでステージングされた変更内容を確認します。（必要であればステージング内容を修正します）
    2. `COMMIT_MESSAGE.txt` の内容をコピーし、VS Codeのコミットメッセージ入力欄に貼り付けます。
    3. VS CodeのUIからコミットを実行します。
- Clineは `git commit` コマンドの実行は行いません。
- ユーザーにコミットを促す際、作業中の内容を分割してコミットしたい場合は、対象となるファイル・あえてステージングしなかったファイルの一覧を作成し、ユーザに提示します。

### 5. 重要な注意事項

1. コミット関連
   - ステージングまでを自動的に行い、コミットは絶対にしない
   - ステージングにおいても関係ないファイルは含めない
   - git設定は変更しない

2. ブランチ操作関連
   - 必要に応じて新しいブランチを作成
   - 変更を適切にコミット
   - リモートへのプッシュは `-u` フラグを使用
   - すべての変更を分析

3. 避けるべき操作
   - 対話的なgitコマンド（-iフラグ）の使用
   - リモートリポジトリへの直接プッシュ
   - git設定の変更

## コミットメッセージ規約

### 1. 基本構造


<type>(<scope>): <subject>

<body>

<footer>

# プロンプト履歴
<prompt_history>


### 2. 各要素の説明

#### Type
- feature: 新機能
- fix: バグ修正
- docs: ドキュメントのみの変更
- style: コードの意味に影響を与えない変更（空白、フォーマット、セミコロンの追加など）
- refactor: バグ修正や機能追加のないコードの変更
- test: テストの追加・修正
- chore: ビルドプロセスやドキュメント生成などの補助ツールやライブラリの変更

#### Scope
- 変更の影響範囲を示す（例: `domain::user`, `infra::jetstream`, `app::worker` など、関連するモジュールやコンポーネント名）
- 複数のスコープがある場合はカンマで区切る
- 全体的な変更の場合は省略可能

#### Subject
- 変更内容を簡潔に要約

#### Body
- 変更の詳細な説明
- 改行して複数行で記述可能
- なぜその変更が必要だったのかの背景も含める
- 72文字で改行

### Footer

- 作成したClineのバージョンや使用したモデルなどの情報を記載
- 必要に応じて関連するIssue番号などを記載（例: `Closes #123`, `Refs #456`）

#### Prompt History
- ユーザーが指示したプロンプトの履歴を記載
- プロンプトに関連する追加のコンテキスト情報も含める

### 3. コミットメッセージの例

feature(reviews): ドキュメントレビュー承認機能を追加

- レビュー承認ワークフローを実装
- 承認条件のバリデーションを追加
- 承認履歴の追跡機能を実装

Cline v1.0.0 Sonnet 3.7

# プロンプト履歴
1. Q: 投稿機能の実装をお願いします
   A: 投稿を実装し、投稿条件のバリデーションを追加

2. Q: 投稿履歴の追加もお願いします
   A: 投稿履歴の追跡機能を実装し、履歴データの保存と表示機能を追加
   A: 投稿履歴の追跡機能を実装し、履歴データの保存と表示機能を追加
